<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galeria de Fotos</title>
    <link rel="stylesheet" href="styles/main.css">
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
</head>

<body onload="updateChoose();">
    <header id="topbar">
        
        <div id="search-container">
            <input id="search-container-input" type="text" placeholder="Pesquisar...">
            <img src="https://img.icons8.com/ios-filled/50/000000/search--v1.png" alt="Lupa">
        </div>

        <div id="space">
            <a href="import.html" id="space1"><img src="images/sidebar/import.png"></a>
            <a onclick="loadSettings(5);" href="settings.html" id="space2"><img src="images/sidebar/help.png"></a>
        </div>
    </header>



    <aside id="sidebar">
        <div id="continuar" onclick="updateChoose(); redirectToPage('create-album.html');">Continuar</div>
        <div id="voltar" onclick="goToPreviousPage();">Voltar</div>

        <button onclick="window.location.href='settings.html';">
            <img id="account" src="images/sidebar/account.jpg" title="Conta">
        </button>

        <div id="hr-top"></div>

        <button onclick="window.location.href='index.html';">
            <img id="home" src="images/sidebar/images.png" title="Fotos">
        </button>

        <button onclick="window.location.href='archive.html';">
            <img id="archive-a" src="images/sidebar/albuns.png" title="Álbuns">
        </button>

        <button onclick="window.location.href='chat.html';">
            <img id="chat" src="images/sidebar/chat.png" title="Partilhados">
        </button>

        <button onclick="window.location.href='private.html';">
            <img id="private" src="images/sidebar/private.png" title="Privado">
        </button>

        <div id="hr-bottom"></div>

        <button id="last" onclick="window.location.href='settings.html';">
            <img id="settings-b" src="images/sidebar/settings.png" title="Definições">
        </button>
    </aside>

    
    <main id="content">
            <h1 style="text-align: center; margin-top: 1em;">Filtragem das Fotografias</h1>
            
            <div id="aply" style="display: flex; justify-content: center; margin-top: 2em; font-weight: 600;">
                <form id="formStyle">
                    <div>
                        <h2 style=" text-align: center; margin-bottom: 0.8em;">Tamanho e Quantidade</h2>
                        <label for="resolucao">Largura:</label>
                        <select name="resolucao" id="resolucao" onclick="updateChoose();">
                            <option value="0">--</option>
                            <option value="1">1080 pixeis</option>
                            <option value="2">1350 pixeis</option>
                            <option value="3">1600 pixeis</option>                            
                            <option value="4">2180 pixeis</option>
                            <option value="5">2670 pixeis</option>
                            <option value="6">3000 pixeis</option>
                        </select>

                        <label for="resolucao1">Altura:</label>
                        <select name="resolucao1" id="resolucao1" onclick="updateChoose();">
                            <option value="0">--</option>
                            <option value="1">1080 pixeis</option>
                            <option value="2">1350 pixeis</option>
                            <option value="3">1600 pixeis</option>                            
                            <option value="4">2180 pixeis</option>
                            <option value="5">2670 pixeis</option>
                            <option value="6">3000 pixeis</option>
                        </select>

                        <label for="quantidade">Quantidade Máxima:</label>
                        <input type="number" min="0" id="quantidade" placeholder="Escreva um valor">
                    </div>



                    <div>
                        <h2 style=" text-align: center; margin-bottom: 0.8em;">Conteúdo</h2>
                        <label for="com">Tipo:</label>
                        <select name="com" id="com" onclick="updateChoose();">
                            <option value="0">--</option>
                            <option value="1">Pessoas</option>
                            <option value="2">Paisagens</option>
                            <option value="3">Animais</option>
                            <option value="4">Selfies</option>
                            <option value="5">Documentos</option>
                        </select>
    
                        <label for="cores">Cores:</label>
                        <select name="cores" id="cores" onclick="updateChoose();">
                            <option value="0">--</option>
                            <option value="1">Vermelho</option>
                            <option value="2">Rosa</option>
                            <option value="3">Verde</option>
                            <option value="4">Castanho</option>
                            <option value="5">Amarelo</option>
                            <option value="6">Preto</option>
                            <option value="7">Branco</option>
                            <option value="8">Azul</option>
                            <option value="9">Cinzento</option>
                        </select>
    
                        <label for="emocoes">Emoções:</label>
                        <select name="emocoes" id="emocoes" onclick="updateChoose();">
                            <option value="0">--</option>
                            <option value="1">Feliz</option>
                            <option value="2">Triste</option>
                            <option value="3">Contente</option>
                            <option value="4">Zangado</option>
                            <option value="5">Satisfeito</option>
                            <option value="6">Cansado</option>
                        </select>
                    </div>
   
            

                    <div>
                        <h2 style=" text-align: center; margin-bottom: 0.3em;">Horário</h2>
                        <p style="grid-column: span 2; margin-top: 1em;">Hora</p>
                        <label for="hora_de" style="margin-left: 2em; font-weight: 300;">Desde:</label>
                        <input type="time" name="hora_de" id="hora_de" onclick="updateChoose();">
                
                        <label for="hora_ate" style="margin-left: 2em; font-weight: 300;">Até:</label>
                        <input type="time" name="hora_ate" id="hora_ate" onclick="updateChoose();">
                
                        <p style="grid-column: span 2; margin-top: 1em;">Data</p>
                        <label for="data_de" style="margin-left: 2em; font-weight: 300;">Desde:</label>
                        <input type="date" name="data_de" id="data_de" onclick="updateChoose();">
                
                        <label for="data_ate" style="margin-left: 2em; font-weight: 300;">Até:</label>
                        <input type="date" name="data_ate" id="data_ate" onclick="updateChoose();">
                    </div>



                    <div>
                        <h2 style=" text-align: center; margin-bottom: 0.3em;">Características Técnicas</h2>
                        <p style="grid-column: span 2; margin-top: 1em;">Abertura</p>
                        <label for="abertura_de" style="margin-left: 2em; font-weight: 300;">Desde:</label>
                        <input type="number" min="0" id="abertura_de" placeholder="Escreva um valor" onclick="updateChoose();">
                
                        <label for="abertura_ate" style="margin-left: 2em; font-weight: 300;">Até:</label>
                        <input type="number" min="0" id="abertura_ate" placeholder="Escreva um valor" onclick="updateChoose();">
                
                        <p style="grid-column: span 2; margin-top: 1em;">ISO</p>
                        <label for="iso_de" style="margin-left: 2em; font-weight: 300;">Desde:</label>
                        <input type="number" min="0" id="iso_de" placeholder="Escreva um valor" onclick="updateChoose();">
                
                        <label for="iso_ate" style="margin-left: 2em; font-weight: 300;">Até:</label>
                        <input type="number" min="0" id="iso_ate" placeholder="Escreva um valor" onclick="updateChoose();">
                    </div>
                </form>
            </div>
            
            
            

            <div style="text-align: center; margin-top: 4em; margin-bottom: 2em;">
                <span id="escolher" onclick="resetClean();">Limpar</span>
                <span id="escolher" onclick="redirectToPage('view.html');">Pré-Visualizar</span>
            </div>
    </main>

    <script>
        console.log(JSON.parse(localStorage.getItem('chooseList')));

        function updateChoose() {
            const resolucao = document.getElementById("resolucao").value;
            const com = document.getElementById("com").value;
            const hora_de = document.getElementById("hora_de").value;
            const hora_ate = document.getElementById("hora_ate").value;
            const data_de = document.getElementById("data_de").value;
            const data_ate = document.getElementById("data_ate").value;

            var numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            if (resolucao != 0) {

                var value = 0
                numbers = numbers.filter(function(item) {
                    return item !== value
                })

                var value = 1
                numbers = numbers.filter(function(item) {
                    return item !== value
                })
            }

            if (com != 0) {

                var value = 2
                numbers = numbers.filter(function(item) {
                    return item !== value
                })

                var value = 3
                numbers = numbers.filter(function(item) {
                    return item !== value
                })
            }

            if (hora_ate != "" && hora_de != "") {

                var value = 4
                numbers = numbers.filter(function(item) {
                    return item !== value
                })

                var value = 5
                numbers = numbers.filter(function(item) {
                    return item !== value
                })
            }

            if (data_ate != "" && data_de != "") {

                var value = 4
                numbers = numbers.filter(function(item) {
                    return item !== value
                })

                var value = 5
                numbers = numbers.filter(function(item) {
                    return item !== value
                })
            }


            const imageFiles = JSON.parse(localStorage.getItem("chooseList"));
            var newList = []

            imageFiles.forEach(image => {
                const numm = image.split('/');
                const numSee = numm[numm.length - 1].split('.')[0].split('P')[1];
                const numLast = parseInt(numSee.substring(numSee.length - 1));

                if (numbers.includes(numLast)){
                    newList.push(image)
                }
            });

            console.log(newList);
            localStorage.setItem("newList", JSON.stringify(newList));

        };


        function resetClean() {
            document.getElementById("resolucao").value = 0;
            document.getElementById("com").value = 0;
            document.getElementById("hora_de").value = "";
            document.getElementById("hora_ate").value = "";
            document.getElementById("data_de").value = "";
            document.getElementById("data_ate").value = "";
        };
    </script>

    <script src="scripts/main.js"></script>
</body>
</html>
